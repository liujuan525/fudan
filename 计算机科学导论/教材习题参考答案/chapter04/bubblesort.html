<!DOCTYPE html>   
<head>   
<meta charset="UTF-8">  
<title>canvas元素示例</title> 
<style>
	#left{
		
		border:solid 1px red;
		width:100px;
		height:600px;
		
		}
		#content
		{
			width:800px;
		height:600px;
			float:left;
			}
			#pretravel
			{
				border:solid 1px red;
				width:800px;
				height:30px;
				background-color:#ffeedd;
				}
	</style> 
<script type="text/javascript">
	 var n=0;
	 var tras=0;
	  var xy;
	  var context;
	  var iterator=0;
function draw(id) 
{  
   var canvas = document.getElementById(id);  
    if (canvas == null)  
        return false;  
     context = canvas.getContext('2d');
    var leafs=document.getElementById("tree").value;
    xy=leafs.split(" ");
    var i;
	
    for(i=0;i<xy.length;i++)
       xy[i]=parseInt(xy[i]);
    context.fillStyle = "#eeeeff";
    context.strokeStyle="#FF0000";
    context.fillRect(0,0,800,600); 

     
} 
	function drawleaf(num,x,y,context)
{      
          
      
		
		context.fillRect(x,y,60,60);
		context.fillStyle="#FF0000";
		context.font="22px Arial";
		context.fillText(num,x+20,y+30);
     
}
function bubblesort()
{
  var i;
  var j;
  
  for(i=0;i<xy.length-iterator;i++)
  {
	  context.fillStyle = "#00ffdd";
	  drawleaf(xy[i],tras,20+i*80,context);
  }
   

   for(j=iterator;j>0;j--)
   {  context.fillStyle="#FF8C00";
    drawleaf(xy[xy.length-j],tras,20+i*80,context);
	 i=i+1;
	}
   
  	
}
function nextbubblesort()
{
	var j,k;
	if(iterator>=xy.length-1)
	{
		alert("排序结束了");
		return;
	}
	
	 
	for(j=0;j<xy.length-1-iterator;j++)
	  if(xy[j]>xy[j+1])
	  {
		  k=xy[j];
		  xy[j]=xy[j+1];
		  xy[j+1]=k;
	  }
	  if(20+iterator*100>800-80)
	  {
	    ctx.clearRect(0,0,800,600);
		tras=0;
		}
		tras=tras+100;
		iterator=iterator+1;
	bubblesort();
	
	
	
}
	</script>  
</head>  
<body>  
		<div>
	<input type="text" id="tree" size="60"/>
	<input type="button" value="画数组" onclick="draw('canvas')"/>
<h1>冒泡排序</h1>
</div>
<div id="container">
 <canvas id="canvas" width="800" height="600"/>  
	</div>
	<input type="button" value="冒泡排序" onclick="bubblesort();"/><br/>
	<input type="button" value="下一步" onclick="nextbubblesort();"/>
	<label id="pretravel"></label>
</body>  
</html>
